<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.ComboBox?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.VBox?>

<VBox alignment="CENTER" spacing="32.0" xmlns="http://javafx.com/javafx/21" xmlns:fx="http://javafx.com/fxml/1" fx:controller="com.emsi.baclegend.controller.LobbyController" styleClass="root">
   <children>
      <Label text="MULTIJOUEUR" styleClass="label-header" />
      
      <HBox spacing="32" alignment="CENTER">
          <!-- HOST CARD -->
          <VBox alignment="CENTER" spacing="16.0" styleClass="game-card" prefWidth="340">
             <children>
                <Label text="CRÉER UNE PARTIE" styleClass="label-title"/>
                <Label text="(Vous serez l'hôte)" styleClass="label-muted" />
                
                <!-- Time Selection for Host -->
                <VBox spacing="8" alignment="CENTER">
                    <Label text="Durée de la manche:" styleClass="label" />
                    <ComboBox fx:id="comboTime" prefWidth="180" />
                </VBox>
                
                <Button mnemonicParsing="false" onAction="#handleHost" text="Créer le Serveur" styleClass="button, button-primary" />
                
                <VBox alignment="CENTER" spacing="8">
                    <HBox alignment="CENTER" spacing="12">
                        <Label fx:id="lblRoomCode" text="..." styleClass="code-display" />
                        <Button text="COPIER" onAction="#handleCopyCode" styleClass="button, button-secondary" style="-fx-padding: 6 16; -fx-font-size: 12px;" />
                    </HBox>
                    <Label fx:id="lblStatusHost" wrapText="true" textAlignment="CENTER" styleClass="label" />
                </VBox>
             </children>
          </VBox>
          
          <!-- JOIN CARD -->
          <VBox alignment="CENTER" spacing="16.0" styleClass="game-card" prefWidth="340">
             <children>
                <Label text="REJOINDRE" styleClass="label-title, success-text"/>
                <Label text="(Entrez le code de l'hôte)" styleClass="label-muted" />
                
                <TextField fx:id="txtCode" promptText="Code de la salle" styleClass="text-field" alignment="CENTER" maxWidth="200" />
                <Button mnemonicParsing="false" onAction="#handleJoin" text="Rejoindre" styleClass="button, button-success" />
                
                <Label fx:id="lblStatusJoin" wrapText="true" textAlignment="CENTER" styleClass="label" />
             </children>
          </VBox>
      </HBox>
      
      <VBox alignment="CENTER" spacing="12" styleClass="game-card" maxWidth="700">
           <Label text="JOUEURS CONNECTÉS" styleClass="label-muted"/>
           <VBox fx:id="vboxPlayers" alignment="CENTER" spacing="8" />
           <Button fx:id="btnStartGame" onAction="#handleStartGame" text="LANCER LA PARTIE" visible="false" styleClass="button, button-success" />
      </VBox>
      
      <Button mnemonicParsing="false" onAction="#handleRetour" text="← Retour" styleClass="button, button-secondary" />
   </children>
   <padding>
      <Insets bottom="40.0" left="40.0" right="40.0" top="40.0" />
   </padding>
</VBox>
